<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Dashboard iPad 2</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      font-family: sans-serif;
      background: #f0f0f0;
      overflow: hidden;
      text-align: center;
    }

    #digitalClock {
      font-size: 2.2em;
      color: red;
      margin: 10px 0;
      font-family: monospace;
    }

    canvas {
      background: white;
      border-radius: 50%;
      width: 180px;
      height: 180px;
      margin: 0 auto 10px auto;
    }

    .timer-btns {
      margin: 10px 0;
    }

    .timer-btns button {
      margin: 4px;
      padding: 6px 10px;
      font-size: 14px;
    }

    #timer {
      font-size: 1.5em;
      color: darkred;
      margin-bottom: 10px;
    }

    .calendar {
      background: white;
      border-radius: 8px;
      padding: 8px;
      margin: 10px auto;
      width: 300px;
      font-family: monospace;
      font-size: 13px;
      line-height: 1.5;
    }

    .calendar mark {
      background-color: red;
      color: white;
      padding: 2px 4px;
      border-radius: 3px;
    }

    #toolsContainer {
      display: flex;
      justify-content: center;
      gap: 10px;
      flex-wrap: wrap;
      max-width: 700px;
      margin: 10px auto;
    }

    #notes, #calculator {
      background: #222;
      color: #f1f1f1;
      border-radius: 6px;
      padding: 10px;
      flex: 1 1 300px;
      min-width: 280px;
      box-sizing: border-box;
    }

    #notes textarea {
      width: 100%;
      height: 80px;
      background: #111;
      color: #fff;
      border: 1px solid #555;
      border-radius: 4px;
      font-family: monospace;
      font-size: 13px;
      padding: 5px;
    }

    #saveNotesBtn {
      margin-top: 6px;
      padding: 6px 12px;
      background: #2196F3;
      color: white;
      border: none;
      border-radius: 4px;
    }

    #calcDisplay {
      width: 100%;
      height: 30px;
      font-size: 1.2em;
      text-align: right;
      background: #111;
      color: #fff;
      border: 1px solid #555;
      border-radius: 4px;
      padding: 5px;
      margin-bottom: 6px;
      box-sizing: border-box;
    }

    #calcButtons button {
      width: 22%;
      margin: 2%;
      padding: 6px 0;
      font-size: 16px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      background: #ccc;
    }

    #calcButtons .operator {
      background: #f90;
      color: white;
    }

    #calcButtons .equals {
      width: 94%;
      background: #2196F3;
      color: white;
    }
  </style>
</head>
<body>

  <div id="digitalClock">--:--:--</div>
  <canvas id="clockCanvas" width="180" height="180"></canvas>

  <div class="timer-btns">
    <button onclick="startTimer(1)">1 Min</button>
    <button onclick="startTimer(5)">5 Min</button>
    <button onclick="startTimer(10)">10 Min</button>
    <button onclick="startTimer(15)">15 Min</button>
  </div>
  <div id="timer">00:00</div>

  <div class="calendar">
    <div id="calendarDisplay"></div>
  </div>

  <div id="toolsContainer">
    <div id="notes">
      <h3>Notizen</h3>
      <textarea id="notesArea" placeholder="Deine Notizen..."></textarea><br>
      <button id="saveNotesBtn">Speichern</button>
    </div>

    <div id="calculator">
      <h3>Rechner</h3>
      <input type="text" id="calcDisplay" readonly>
      <div id="calcButtons">
        <button onclick="calcPress('7')">7</button>
        <button onclick="calcPress('8')">8</button>
        <button onclick="calcPress('9')">9</button>
        <button class="operator" onclick="calcPress('/')">÷</button>
        <button onclick="calcPress('4')">4</button>
        <button onclick="calcPress('5')">5</button>
        <button onclick="calcPress('6')">6</button>
        <button class="operator" onclick="calcPress('*')">×</button>
        <button onclick="calcPress('1')">1</button>
        <button onclick="calcPress('2')">2</button>
        <button onclick="calcPress('3')">3</button>
        <button class="operator" onclick="calcPress('-')">−</button>
        <button onclick="calcPress('0')">0</button>
        <button onclick="calcPress('.')">.</button>
        <button onclick="calcClear()">C</button>
        <button class="operator" onclick="calcPress('+')">+</button>
        <button class="equals" onclick="calcCalculate()">=</button>
      </div>
    </div>
  </div>

  <script>
    // Analoge Uhr
    const canvas = document.getElementById("clockCanvas");
    const ctx = canvas.getContext("2d");
    const radius = canvas.height / 2;
    ctx.translate(radius, radius);

    function drawClock() {
      ctx.clearRect(-radius, -radius, canvas.width, canvas.height);
      ctx.beginPath();
      ctx.arc(0, 0, radius * 0.95, 0, 2 * Math.PI);
      ctx.fillStyle = "#fff";
      ctx.fill();
      ctx.stroke();

      for (let num = 1; num <= 12; num++) {
        let ang = num * Math.PI / 6;
        ctx.rotate(ang);
        ctx.translate(0, -radius * 0.8);
        ctx.rotate(-ang);
        ctx.fillText(num.toString(), -5, 5);
        ctx.rotate(ang);
        ctx.translate(0, radius * 0.8);
        ctx.rotate(-ang);
      }

      const now = new Date();
      const hour = now.getHours() % 12;
      const minute = now.getMinutes();
      const second = now.getSeconds();

      drawHand((hour + minute / 60) * Math.PI / 6, radius * 0.5, 6);
      drawHand(minute * Math.PI / 30, radius * 0.7, 4);
      drawHand(second * Math.PI / 30, radius * 0.9, 2, 'red');

      const h = now.getHours().toString().padStart(2, '0');
      const m = minute.toString().padStart(2, '0');
      const s = second.toString().padStart(2, '0');
      document.getElementById("digitalClock").textContent = `${h}:${m}:${s}`;
    }

    function drawHand(pos, length, width, color = "#000") {
      ctx.beginPath();
      ctx.lineWidth = width;
      ctx.lineCap = "round";
      ctx.strokeStyle = color;
      ctx.moveTo(0, 0);
      ctx.lineTo(length * Math.sin(pos), -length * Math.cos(pos));
      ctx.stroke();
    }

    setInterval(drawClock, 1000);
    drawClock();

    // Timer
    let timerInterval;
    function startTimer(minutes) {
      clearInterval(timerInterval);
      let seconds = minutes * 60;
      updateTimer(seconds);
      timerInterval = setInterval(() => {
        seconds--;
        updateTimer(seconds);
        if (seconds <= 0) {
          clearInterval(timerInterval);
          alert("Zeit ist um!");
        }
      }, 1000);
    }

    function updateTimer(sec) {
      const m = Math.floor(sec / 60).toString().padStart(2, '0');
      const s = (sec % 60).toString().padStart(2, '0');
      document.getElementById("timer").textContent = `${m}:${s}`;
    }

    // Kalender
    function renderCalendar() {
      const now = new Date();
      const year = now.getFullYear();
      const month = now.getMonth();
      const today = now.getDate();
      const monthNames = ['Januar','Februar','März','April','Mai','Juni','Juli','August','September','Oktober','November','Dezember'];
      const dayNames = ['Mo','Di','Mi','Do','Fr','Sa','So'];

      const firstDay = new Date(year, month, 1);
      const startDay = (firstDay.getDay() + 6) % 7; // Montag = 0
      const daysInMonth = new Date(year, month + 1, 0).getDate();

      let html = `<strong>${monthNames[month]} ${year}</strong><br>Kalenderwoche: ${getISOWeek(now)}<br>`;
      html += dayNames.join(' ') + '<br>';

      let day = 1 - startDay;
      for (let w = 0; w < 6; w++) {
        for (let d = 0; d < 7; d++) {
          if (day < 1 || day > daysInMonth) {
            html += '&nbsp;&nbsp;&nbsp;';
          } else {
            html += (day === today)
              ? `<mark>${day.toString().padStart(2, ' ')}</mark> `
              : `${day.toString().padStart(2, ' ')} `;
          }
          html += ' ';
          day++;
        }
        html += '<br>';
      }
      document.getElementById("calendarDisplay").innerHTML = html;
    }

    function getISOWeek(date) {
      const temp = new Date(date.getTime());
      temp.setHours(0, 0, 0, 0);
      temp.setDate(temp.getDate() + 3 - (temp.getDay() + 6) % 7);
      const week1 = new Date(temp.getFullYear(), 0, 4);
      return 1 + Math.round(((temp - week1) / 86400000 - 3 + (week1.getDay() + 6) % 7) / 7);
    }

    renderCalendar();

    // Notizen
    const notesArea = document.getElementById("notesArea");
    const notesKey = "ipad2_notes";
    notesArea.value = localStorage.getItem(notesKey) || "";
    document.getElementById("saveNotesBtn").onclick = () => {
      localStorage.setItem(notesKey, notesArea.value);
      alert("Gespeichert!");
    };

    // Rechner
    let calcInput = "";
    function calcPress(val) {
      calcInput += val;
      document.getElementById("calcDisplay").value = calcInput;
    }

    function calcClear() {
      calcInput = "";
      document.getElementById("calcDisplay").value = "";
    }

    function calcCalculate() {
      try {
        const safe = calcInput.replace(/[^0-9+\-*/().]/g, '');
        const result = eval(safe);
        document.getElementById("calcDisplay").value = result;
        calcInput = result.toString();
      } catch (e) {
        document.getElementById("calcDisplay").value = "Fehler";
        calcInput = "";
      }
    }
  </script>
</body>
</html>
